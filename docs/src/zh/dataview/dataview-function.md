---
# è¿™æ˜¯æ–‡ç« çš„æ ‡é¢˜
title: Dataviewå‡½æ•°é›†åˆ
# è¿™æ˜¯ä¾§è¾¹æ çš„é¡ºåº
order: 3
# è¿™æ˜¯é¡µé¢çš„å›¾æ ‡
icon: activity
# æ§åˆ¶å·¦ä¾§æ˜¾ç¤ºå±‚æ•°(åªæ˜¾ç¤º2å±‚)ï¼Œä½†æ˜¯å³ä¾§ä¼šæ˜¾ç¤º3çº§
headerDepth: 2
---
**è¯´æ˜ï¼š**  
è¿™é‡Œè®°å½• dataview å¯ä½¿ç”¨çš„ä¸€äº›å‡½æ•°ä¾›å‚è€ƒ
::: tip Dataview å‡½æ•°çš„ç”¨é€”
Dataview å‡½æ•°æä¾›äº†æ›´é«˜çº§çš„æ•°æ®æ“ä½œæ–¹æ³•ï¼Œå¯ä»¥åœ¨é™¤äº†`From`ä¹‹å¤–çš„åœ°æ–¹ï¼Œä½¿ç”¨å‡½æ•°æ¥è¿‡æ»¤ä¿¡æ¯ã€‚å¾—åˆ°æ›´çµæ´»çš„æŸ¥è¯¢æ•°æ®.
:::

å‡½æ•°ä¸»è¦æ˜¯åœ¨`where`ä¸­ä½¿ç”¨ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åµŒå¥—ä½¿ç”¨ä»¥ä¸‹çš„å‡½æ•°å®ç°æ›´çµæ´»çš„ç”¨æ³•ã€‚

```mermaid
  flowchart TD
      A("Dataviewå‡½æ•°æ„æˆ") --> B["1 æ„é€ å™¨"]
      A --> C("2 æ•°å€¼è®¡ç®—")
      A --> D("3 å¯¹è±¡æ•°ç»„æ“ä½œ")
      A --> E("4 å­—ç¬¦ä¸²æ“ä½œÂ ")
      A --> F("5 å·¥å…·å‡½æ•°")
```
::: details ğŸ†å„å‡½æ•°å¤§çº²-ç‚¹å‡»å±•å¼€
::: tabs
@tab:active ğŸ¥•1 æ„é€ å™¨-
<!-- :active å°†è¢«é»˜è®¤æ¿€æ´»-->
```mermaid
  flowchart LR
      A("1 æ„é€ å™¨") --> 1["date(any)<br>1 æ—¥æœŸå‡½æ•°"]
      A --> 2("dur(any)<br>2 æŒç»­æ—¶é—´")
      A --> 3("number(string)<br>3 æå–æ•°å­—")
      A --> 4("string(any)<br>4 è½¬æ¢æˆå­—ç¬¦ä¸²")
      A --> 5("link(path, [display])<br>5 åˆ›å»ºé“¾æ¥")
      A --> 6("embed(link, [embed?])<br>6 åµŒå…¥é“¾æ¥")
      A --> 7("elink(url, [display])<br>7 åˆ›å»ºå¤–éƒ¨ url çš„é“¾æ¥")
      A --> 8("typeof(any)<br>8 æ˜¾ç¤ºå¯¹è±¡çš„ç±»å‹")
```
@tab ğŸŠ2 æ•°å€¼è¿ç®—
<!-- tab 2 å†…å®¹ --> 
```mermaid
  flowchart LR
      A("2 æ•°å€¼è¿ç®—") --> 1["round(number, [digits])<br>1 å°†æ•°å­—å››èˆäº”å…¥"]
      A --> 2("min(a, b, ..)<br>2 è®¡ç®—æœ€å°å€¼")
      A --> 3("max(a, b, ..)<br>3 è®¡ç®—æœ€å¤§å€¼")
      A --> 4("sum(array)<br>4 æ±‚å’Œ")
      A --> 5("product(array)<br>5 è®¡ç®—ä¹˜ç§¯")
      A --> 6("average(array)<br>6 æ±‚å¹³å‡å€¼")
      A --> 7("minby(array, function)<br>7 è®¡ç®—æ•°ç»„æœ€å°å€¼")
      A --> 8("maxby(array, function)<br>8 è®¡ç®—æ•°ç»„æœ€å¤§å€¼")
```
@tab ğŸ¥’3 å¯¹è±¡ã€æ•°ç»„å’Œå­—ç¬¦ä¸²æ“ä½œ
<!-- tab 3 å†…å®¹ -->
```mermaid
  flowchart LR
      A("3 å¯¹è±¡ã€æ•°ç»„å’Œå­—ç¬¦ä¸²æ“") --> 1["contains()<br>1 åˆ¤æ–­åŒ…å«å†…å®¹"]
      A --> 2("containsword(list|string, value)<br>2 å•è¯å®Œå…¨åŒ¹é…ï¼Œä¸åŒºåˆ†å¤§å°å†™")
      A --> 3("extract(object, key1, key2, ...)<br>3 æå–å¤šä¸ªå­—æ®µ")
      A --> 4("sort(list)<br>4 å¯¹åˆ—è¡¨æ’åº")
      A --> 5("reverse(list)<br>5 åè½¬åˆ—è¡¨")
      A --> 6("length(object|array)<br>6 è¿”å›å¯¹è±¡çš„å­—æ®µæ•°")
      A --> 7("nonnull(array)<br>7 åˆ é™¤ç©ºå€¼")
      A --> 8("all(array)<br>8 æ•°ç»„ä¸­æ‰€æœ‰å€¼ä¸ºçœŸ")
      A --> 9("any(array)<br>9 æ•°ç»„ä»»ä½•å€¼éƒ½ä¸ºçœŸ")
      A --> 10("none(array)<br>10 æ•°ç»„ä¸­æ²¡æœ‰çœŸ")
      A --> 11("join(array, [delimiter])<br>11 æ‹¼æ¥å‡½æ•°")
      A --> 12("filter(array, predicate)<br>12 è¿‡æ»¤æ•°ç»„ä¸­å…ƒç´ ")
      A --> 13("map(array, func)<br>13 æ˜ å°„ç»“æœçš„åˆ—è¡¨")
```
@tab ğŸ‰4 å­—ç¬¦ä¸²æ“ä½œ
```mermaid
  flowchart LR
      A("4 å­—ç¬¦ä¸²æ“ä½œæ“") --> 1["regextest(pattern, string)<br>1 æ£€æŸ¥æ˜¯å¦åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼"]
      A --> 2("regexmatch(pattern, string)<br>2 æ­£åˆ™è¡¨è¾¾å¼æ£€æµ‹æ˜¯å¦ä¸æ•´ä¸ªå­—ç¬¦ä¸²åŒ¹é…")
      A --> 3("regexreplace(string, pattern, replacement)<br>3 æ­£åˆ™åŒ¹é…åæ›¿æ¢")
      A --> 4("replace(string, pattern, replacement)<br>4 æ›¿æ¢å­—ç¬¦ä¸²")
      A --> 5("lower(string)<br>5 å°†å­—ç¬¦ä¸²è½¬ä¸ºå°å†™")
      A --> 6("upper(string)<br>6 å°†å­—ç¬¦ä¸²è½¬ä¸ºå¤§å†™")
      A --> 7("split(string, delimiter, [limit])<br>7 æ‹†åˆ†å­—ç¬¦ä¸²")
      A --> 8("startswith(string, prefix)<br>8 æ£€æŸ¥æ˜¯å¦ä»¥æŒ‡å®šå‰ç¼€å¼€å¤´")
      A --> 9("endswith(string, suffix)<br>9 æ£€æŸ¥æ˜¯å¦ä»¥æŒ‡å®šçš„åç¼€ç»“å°¾")
      A --> 10("padleft(string, length, [padding])<br>10 åœ¨å·¦ä¾§æ·»åŠ å¡«å……å­—ç¬¦ä¸²è®©é•¿åº¦è¾¾æ ‡")
      A --> 11("padright(string, length, [padding])<br>11 åœ¨å³ä¾§ä¾§æ·»åŠ å¡«å……å­—ç¬¦ä¸²è®©é•¿åº¦è¾¾æ ‡")
      A --> 12("substring(string, start, [end])<br>12 æŒ‡å®šèŒƒå›´å–å€¼")
      A --> 13("truncate(string, length, [suffix])`<br>13 æŒ‰é•¿åº¦æˆªæ–­å­—ç¬¦ä¸²")
```
@tab ğŸ¥­5 å·¥å…·å‡½æ•°
```mermaid
  flowchart LR
      A("5 å·¥å…·å‡½æ•°") --> 1["default(field, value) <br>1 é»˜è®¤å€¼"]
      A --> 2("choice(bool, left, right)<br>2 é€‰æ‹©å™¨ä»¿ifåˆ¤æ–­")
      A --> 3("striptime(date)<br>3 å»æ‰æ—¥æœŸçš„æ—¶é—´éƒ¨åˆ†")
      A --> 4("dateformat(date|datetime, string)<br>4 æ ¼å¼åŒ– Dataview æ—¥æœŸ")
      A --> 5("localtime(date)<br>5 å˜æ›´ä¸ºæœ¬åœ°æ—¶é—´")
      A --> 6("meta(link)<br>6 è·å–åŒ…å«é“¾æ¥å…ƒæ•°æ®çš„å¯¹è±¡")
      6 --> 6.1("meta(link).display`<br>1 è·å–é“¾æ¥çš„æ˜¾ç¤ºæ–‡æœ¬")
      6 --> 6.2("meta(link).embed<br>2 åˆ¤æ–­é“¾æ¥æ˜¯å¦åµŒå…¥")
      6 --> 6.3("meta(link).path<br>3 è·å–é“¾æ¥çš„è·¯å¾„")
      6 --> 6.4("meta(link).subpath<br>4 è·å–é“¾æ¥çš„å­è·¯å¾„")
      6 --> 6.5("meta(link).type<br>5 åˆ¤æ–­é“¾æ¥çš„ç±»å‹æ˜¯<br>æ–‡æœ¬ã€æ ‡é¢˜è¿˜æ˜¯å—")
```
:::
::: danger æœ¬æ–‡æ¡£ä½¿ç”¨æ–¹æ³•(å¿…çœ‹)
å‡½æ•°æ˜¯åœ¨å¤ªå¤šå¤ªé•¿äº†ï¼Œé¡µé¢ä¸åˆ©äºé˜…è¯»ã€‚æ‰€ä»¥æ•´ç†å‡º5ç§åŠŸèƒ½å‡½æ•°çš„å¤§çº²å›¾ã€‚  
ä»`å¤§çº²å›¾`ï¼Œæ›´å®¹æ˜“çœ‹ç»“æ„ï¼ŒçŸ¥é“æœ‰å“ªäº›å†…å®¹ã€‚
éœ€è¦æŸ¥é˜…å¯¹åº”å†…å®¹ï¼Œå¤åˆ¶`å¤§çº²å›¾`ä¸­çš„å‡½æ•°ååœ¨æœ¬é¡µæœç´¢å…³é”®å­—ï¼š`Ctrl` + `F` 
:::
## 1 ConstructorsÂ æ„é€ å™¨
æ–°å»ºå€¼çš„æ„é€ å‡½æ•°
::: danger æ„é€ å™¨
éç¨‹åºå‘˜ï¼Œè¿™ä¸ªæ¦‚å¿µå¯ä¸ç”¨ç†ä¼šï¼Œå•çº¯çš„ä¸ºäº†åˆ†ç±»ã€‚ä¸‹é¢çš„å‡½æ•°ç…§æ ¼å¼ç”¨å°±å¯ä»¥ï¼Œä¸ç”¨æ·±ç©¶ã€‚
:::
::: details 1 æ„é€ å™¨-å¤§çº²(ç‚¹å‡»å±•å¼€)
```mermaid
  flowchart LR
      A("1 æ„é€ å™¨") --> 1["date(any)<br>1 æ—¥æœŸå‡½æ•°"]
      A --> 2("dur(any)<br>2 æŒç»­æ—¶é—´")
      A --> 3("number(string)<br>3 æå–æ•°å­—")
      A --> 4("string(any)<br>4 è½¬æ¢æˆå­—ç¬¦ä¸²")
      A --> 5("link(path, [display])<br>5 åˆ›å»ºé“¾æ¥")
      A --> 6("embed(link, [embed?])<br>6 åµŒå…¥é“¾æ¥")
      A --> 7("elink(url, [display])<br>7 åˆ›å»ºå¤–éƒ¨ url çš„é“¾æ¥")
      A --> 8("typeof(any)<br>8 æ˜¾ç¤ºå¯¹è±¡çš„ç±»å‹")
```
:::
### 1.1 `date(any)`æ—¥æœŸå‡½æ•°
å¦‚æœå¯èƒ½ï¼Œä»æä¾›çš„å­—ç¬¦ä¸²ã€æ—¥æœŸæˆ–é“¾æ¥å¯¹è±¡ä¸­è§£ææ—¥æœŸï¼Œå¦åˆ™è¿”å› nullã€‚
```js
date("2020-04-18") //æ—¥æœŸå¯¹è±¡ï¼Œä»£è¡¨2020å¹´4æœˆ18æ—¥
date([[2021-04-16]]) //æŒ‡å®šé¡µé¢çš„æ—¥æœŸå¯¹è±¡ï¼Œå‚è€ƒfile.day
```
### 1.2 `dur(any)`æŒç»­æ—¶é—´
ä»æä¾›çš„å­—ç¬¦ä¸²æˆ–æŒç»­æ—¶é—´è§£ææŒç»­æ—¶é—´ï¼Œå¤±è´¥æ—¶è¿”å› nullã€‚
```js
dur(8 minutes) //8 åˆ†é’Ÿ
dur("8 minutes, 4 seconds")  // 8 åˆ†é’Ÿ, 4 åˆ†é’Ÿ 
dur(dur(8 minutes)) = dur(8 minutes) //8 åˆ†é’Ÿ
```
::: tip æ—¥æœŸçš„è®¡ç®—ç¤ºä¾‹
å¤§å®¶ç»å¸¸ä¼šæƒ³æŸ¥è¯¢ï¼Œä¸€ä¸ªæ—¶é—´èŒƒå›´å†…çš„æ–‡ä»¶ã€‚è¿™å¯ä»¥ä½¿ç”¨ä»¥ä¸Šä¸¤ä¸ªå‡½æ•°ã€‚
- è·å–ä»Šå¤©çš„æ—¶é—´ï¼š`data(today)`è¡¨ç¤ºè·å–ä»Šå¤©çš„æ—¥æœŸç±»ä¼¼ 2023-02-11ã€‚
- è·å–ä¸€ä¸ªæŒç»­æ—¶é—´ï¼š`dur(7 days)` è¡¨ç¤ºä»7 days è·å–ä¸€ä¸ªæ—¶é—´ï¼Œå°±æ˜¯7å¤©ï¼Œè½¬åŒ–æˆå¯è®¡ç®—çš„
- dataviewçš„éšå¼å­—æ®µï¼Œ`file.cday`è·å–æ–‡ä»¶åˆ›å»ºçš„æ—¥æœŸç±»ä¼¼ 2023-02-10ã€‚
- ä»¥ä¸‹çš„åˆ—å­æ˜¯ï¼šä½¿ç”¨ç›¸åŒç±»å‹çš„æ•°æ®è®¡ç®—ï¼Œdata(today) - file.cday ä»Šå¤©å‡å»æ–‡ä»¶åˆ›å»ºçš„æ—¶é—´ï¼Œå°äºç­‰äº7å¤©ã€‚
:::

::: code-tabs
@tab 7å¤©å†…åˆ›å»ºçš„æ–‡ä»¶
```sql
where date(today) - file.cday <= dur(7 days)
```
@tab:active 7å¤©å†…åˆ›å»ºçš„æ–‡ä»¶-è¡¨æ ¼æœ‰è¡¨å¤´
```sql
table without id
		è¯­è¨€,
 		æ¡†æ¶,
		ç®€è¿°,
		file.cday AS "åˆ›å»ºæ—¥æœŸ"
from "099 Code snippet"
where date(today) - file.cday <=dur(7 days)
sort file.cday desc
limit 15
```
@tab 7å¤©å†…åˆ›å»ºçš„æ–‡ä»¶-åˆ—è¡¨æ˜¾ç¤º
```sql
list
from "099 Code snippet"
where date(today) - file.cday <=dur(7 days)
sort file.cday desc
```
:::

### 1.3 `number(string)` æå–æ•°å­—
å¦‚æœå­—ç¬¦ä¸²ä¸­æœ‰æ•°å­—ï¼Œåˆ™è¿”å›ç¬¬ä¸€ä¸²æ•°å­—ã€‚  
å¦‚æœå­—ç¬¦ä¸²ä¸­æ²¡æœ‰æ•°å­—ï¼Œåˆ™è¿”å› nullã€‚
```js
number("18 years") //ç»“æœä¸º 18 
number(34) //ç»“æœä¸º 34 
number("hmm") //ç»“æœä¸º null
```
### 1.4 `string(any)` è½¬æ¢æˆå­—ç¬¦ä¸²
å°†ä»»ä½•å€¼è½¬æ¢ä¸ºâ€œåˆç†çš„â€å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚å®ƒä¸»è¦ç”¨äºå°†æ—¥æœŸã€æŒç»­æ—¶é—´ã€æ•°å­—ç­‰å¼ºåˆ¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ä»¥è¿›è¡Œæ“ä½œã€‚
::: tip å­—ç¬¦ä¸²æ ¼å¼
å…¶å®å°±æ˜¯å°†å…¶ä»–æ ¼å¼çš„å€¼è½¬æˆå­—ç¬¦ä¸²æ ¼å¼ï¼Œç›¸åä¾‹å­ï¼Œ2023-02-09è¿™ç§å­—ç¬¦ä¸²ä¸èƒ½ç›´æ¥è¿›è¡Œè®¡ç®—ï¼Œè¦è½¬æ¢æˆæ—¥æœŸæˆ–è€…æ•°å­—æ‰è¡Œã€‚
:::
```js
string(18) //å­—ç¬¦ä¸² 18
string(dur(8 hours)) //å­—ç¬¦ä¸² 8 hours 
string(date(2021-08-15)) //å­—ç¬¦ä¸² 2021å¹´8æœˆ15æ—¥
```
### 1.5 `link(path, [display])` åˆ›å»ºé“¾æ¥
ä»æŒ‡å®šçš„æ–‡ä»¶è·¯å¾„æˆ–åç§°æ„é€ ä¸€ä¸ªé“¾æ¥å¯¹è±¡ã€‚å¦‚æœæä¾›ä¸¤ä¸ªå‚æ•°ï¼Œåˆ™ç¬¬äºŒä¸ªå‚æ•°æ˜¯é“¾æ¥çš„æ˜¾ç¤ºåç§°ã€‚`link(è·¯å¾„,æ˜¾ç¤ºåç§°)`
```js
link("Hello") //é“¾æ¥åˆ°åä¸º "Hello "çš„é¡µé¢
link("Hello", "Goodbye") //é“¾æ¥åˆ°åä¸º "Hello "çš„é¡µé¢ï¼Œæ˜¾ç¤ºä¸º "Goodbye"ã€‚
```
> ç±»ä¼¼äºï¼š`[[]]`

### 1.6 `embed(link, [embed?])`åµŒå…¥é“¾æ¥
å°† link é“¾æ¥å¯¹è±¡è½¬æ¢ä¸º embed åµŒå…¥é“¾æ¥ï¼›å¯¹åµŒå…¥å¼é“¾æ¥çš„æ”¯æŒåœ¨ Dataview è§†å›¾ä¸­æœ‰äº›ä¸å®Œå–„ï¼Œä½†å›¾åƒåµŒå…¥åº”è¯¥å¯ä»¥å·¥ä½œã€‚
```js
embed(link("Hello.png")) 
```
::: tip 
- åµŒå…¥ é“¾æ¥åˆ° "Hello.png "çš„å›¾åƒï¼Œè¿™å°†å‘ˆç°ä¸ºä¸€ä¸ªå®é™…çš„å›¾åƒã€‚
- ç±»ä¼¼äº `![[hello.png]]` çš„è¯­æ³•è°ƒç”¨
:::

### 1.7 `elink(url, [display])`åˆ›å»ºå¤–éƒ¨ url çš„é“¾æ¥
åˆ›å»ºæŒ‡å‘å¤–éƒ¨ url çš„é“¾æ¥ï¼ˆå¦‚Â `www.google.com`Â ï¼‰ã€‚å¦‚æœæä¾›ä¸¤ä¸ªå‚æ•°ï¼Œåˆ™ç¬¬äºŒä¸ªå‚æ•°æ˜¯é“¾æ¥çš„æ˜¾ç¤ºåç§°ã€‚
>`elink(é“¾æ¥, æ˜¾ç¤ºåç§°)`ï¼Œç¬¬äºŒä¸ªå‚æ•°éå¿…é¡»
```JS
elink("www.google.com") //åˆ›å»ºä¸€ä¸ªé“¾æ¥åˆ° www.google.com
elink("www.google.com", "Google") //åˆ›å»ºä¸€ä¸ªé“¾æ¥åˆ° www.google.comï¼Œæ˜¾ç¤ºä¸º Google
```
ç±»ä¼¼äºè¯­æ³•ï¼š`[obsidianå’–å•¡è±†æ–‡æ¡£](https://www.coffeetea.top)`
ä¸¾ä¾‹ï¼š[obsidianå’–å•¡è±†æ–‡æ¡£](https://www.coffeetea.top)
### 1.8 `typeof(any)`æ˜¾ç¤ºå¯¹è±¡çš„ç±»å‹
è·å–è¦æ£€æŸ¥çš„ä»»ä½•å¯¹è±¡çš„ç±»å‹ã€‚å¯ä»¥ä¸å…¶ä»–è¿ç®—ç¬¦ç»“åˆä½¿ç”¨ä»¥æ ¹æ®ç±»å‹æ›´æ”¹è¡Œä¸ºã€‚
::: tip ä¸ºä»€ä¹ˆè¦æŸ¥æ•°æ®çš„ç±»å‹
æœ‰æ—¶å€™æˆ‘ä»¬ä¹Ÿä¸çŸ¥é“æ•°æ®çš„ç±»å‹ï¼Œä¹Ÿéœ€è¦æ‰“å°å‡ºæ¥æ•°æ®çš„ç±»å‹ã€‚æ–¹ä¾¿è°ƒç”¨ä¸åŒçš„æ–¹å¼å¤„ç†å¯¹è±¡ã€‚
:::
```js
typeof(8) //"number" æ•°å­—
typeof("text") // "string" å­—ç¬¦ä¸²
typeof([1, 2, 3]) // "array" æ•°ç»„
typeof({ a: 1, b: 2 }) // "object" å¯¹è±¡
typeof(date(2020-01-01)) // "date" æ—¥æœŸ 
typeof(dur(8 minutes)) // "duration" æŒç»­æ—¶é—´
```

## 2 Numeric OperationsÂ æ•°å€¼è¿ç®—
::: danger ä½¿ç”¨æ–¹æ³•
æ¨èå±•å¼€ä¸‹é¢çš„å¤§çº²ï¼ŒæŸ¥çœ‹ä½ éœ€è¦çš„å‡½æ•°ï¼Œåœ¨é€‰æ‹©ä½¿ç”¨ã€‚
:::
::: details ğŸ¥•2 æ•°å€¼è¿ç®—å¤§çº²(ç‚¹å‡»å±•å¼€)
```mermaid
  flowchart LR
      A("2 æ•°å€¼è¿ç®—") --> 1["round(number, [digits])<br>1 å°†æ•°å­—å››èˆäº”å…¥"]
      A --> 2("min(a, b, ..)<br>2 è®¡ç®—æœ€å°å€¼")
      A --> 3("max(a, b, ..)<br>3 è®¡ç®—æœ€å¤§å€¼")
      A --> 4("sum(array)<br>4 æ±‚å’Œ")
      A --> 5("product(array)<br>5 è®¡ç®—ä¹˜ç§¯")
      A --> 6("average(array)<br>6 æ±‚å¹³å‡å€¼")
      A --> 7("minby(array, function)<br>7 è®¡ç®—æ•°ç»„æœ€å°å€¼")
      A --> 8("maxby(array, function)<br>8 è®¡ç®—æ•°ç»„æœ€å¤§å€¼")
```
:::
### 2.1 `round(number, [digits])`å°†æ•°å­—å››èˆäº”å…¥
å°†æ•°å­—å››èˆäº”å…¥åˆ°æŒ‡å®šçš„ä½æ•°ã€‚
- å¦‚æœæœªæŒ‡å®šç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™èˆå…¥åˆ°æœ€æ¥è¿‘çš„æ•´æ•°ï¼›
- å¦åˆ™ï¼Œå››èˆäº”å…¥åˆ°æŒ‡å®šçš„ä½æ•°ã€‚
```js
round(16.555555) //ç»“æœä¸º 17 
round(16.555555, 2) //ç»“æœä¸º 16.56
```
### 2.2 `min(a, b, ..)`è®¡ç®—æœ€å°å€¼
è®¡ç®—å‚æ•°åˆ—è¡¨æˆ–æ•°ç»„çš„æœ€å°å€¼ã€‚
```js
min(1, 2, 3) //ç»“æœä¸º 1 
min([1, 2, 3]) //ç»“æœä¸º 1  
min("a", "ab", "abc") //ç»“æœä¸º "a"
```
### 2.3 `max(a, b, ...)`è®¡ç®—æœ€å¤§å€¼
è®¡ç®—å‚æ•°åˆ—è¡¨æˆ–æ•°ç»„çš„æœ€å¤§å€¼ã€‚
```js
max(1, 2, 3) //ç»“æœä¸º 3 
max([1, 2, 3]) //ç»“æœä¸º 3  
max("a", "ab", "abc") //ç»“æœä¸º "abc"
```
### 2.4 `sum(array)`æ±‚å’Œ
å¯¹æ•°ç»„ä¸­çš„æ‰€æœ‰æ•°å€¼æ±‚å’Œã€‚å¦‚æœå¹³å‡å€¼ä¸­æœ‰ç©ºå€¼ï¼Œåˆ™å¯ä»¥é€šè¿‡Â `nonnull`Â å‡½æ•°æ¶ˆé™¤å®ƒä»¬ã€‚
```js
sum([1, 2, 3]) //ç»“æœä¸º 6 
sum([]) //ç»“æœä¸º null ç©º
sum(nonnull([null, 1, 8])) //ç»“æœä¸º 9
```
::: tip `sum(array)`æ±‚å’Œ
è¯´æ˜ï¼š
- `sum()`æ˜¯æ±‚å’Œçš„å‡½æ•°ï¼Œä¸­é—´çš„å€¼æ˜¯æ•°ç»„
- `nonnull([null, 1, 8])`æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å‡ºçš„å€¼æ˜¯æ¸…é™¤ç©ºå€¼çš„æ•°ç»„ã€‚
- æ‰€ä»¥ï¼Œ`sum(nonnull([null, 1, 8]))`æ˜¯ç»„åˆä½¿ç”¨ã€‚å¾ˆå®¹æ˜“ç†è§£ã€‚æ³¨æ„ç¬¦å·è¦æˆå¯¹ï¼Œç”¨è‹±æ–‡å°±å¯ä»¥äº†
:::
### 2.5 `product(array)`è®¡ç®—ä¹˜ç§¯
è®¡ç®—æ•°ç»„çš„ä¹˜ç§¯ã€‚å¦‚æœå¹³å‡å€¼ä¸­æœ‰ç©ºå€¼ï¼Œåˆ™å¯ä»¥é€šè¿‡Â `nonnull`Â å‡½æ•°æ¶ˆé™¤å®ƒä»¬ã€‚
```js
product([1,2,3]) //ç»“æœä¸º 6 
product([]) //ç»“æœä¸º null  
product(nonnull([null, 1, 2, 4])) //ç»“æœä¸º 8
```
::: tip `sum(array)`æ±‚å’Œ
è¯´æ˜ï¼š
- `product()`æ˜¯è®¡ç®—ä¹˜ç§¯çš„å‡½æ•°ï¼Œä¸­é—´çš„å€¼æ˜¯æ•°ç»„
- `nonnull([null, 1, 2, 4])`æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å‡ºçš„å€¼æ˜¯æ¸…é™¤ç©ºå€¼çš„æ•°ç»„ã€‚
- æ‰€ä»¥ï¼Œ`sum(nonnull([null, 1, 2, 4]))`æ˜¯ç»„åˆä½¿ç”¨ã€‚å¾ˆå®¹æ˜“ç†è§£ã€‚æ³¨æ„ç¬¦å·è¦æˆå¯¹ï¼Œç”¨è‹±æ–‡å°±å¯ä»¥äº†
:::
### 2.6 `average(array)`æ±‚å¹³å‡å€¼
è®¡ç®—æ•°å€¼çš„æ•°å€¼å¹³å‡å€¼ã€‚å¦‚æœå¹³å‡å€¼ä¸­æœ‰ç©ºå€¼ï¼Œåˆ™å¯ä»¥é€šè¿‡Â `nonnull`Â å‡½æ•°æ¶ˆé™¤å®ƒä»¬ã€‚
```js
average([1, 2, 3]) //ç»“æœä¸º 2 
average([]) //ç»“æœä¸º null  
average(nonnull([null, 1, 2])) //ç»“æœä¸º 1.5
```
- `nonnull()`æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å‡ºçš„å€¼æ˜¯æ¸…é™¤ç©ºå€¼çš„æ•°ç»„ã€‚
- `average()`æ˜¯ä¸€ä¸ªæ±‚å¹³å‡å€¼çš„å‡½æ•°ã€‚å¯ä»¥æ±‚`average(nonnull()) `çš„ç»“æœã€‚
### 2.7 `minby(array, function)`è®¡ç®—æ•°ç»„æœ€å°å€¼
ä½¿ç”¨æä¾›çš„å‡½æ•°è®¡ç®—æ•°ç»„çš„æœ€å°å€¼ã€‚
```js
minby([1, 2, 3], (k) => k) //ç»“æœä¸º 1 
minby([1, 2, 3], (k) => 0 - k) //ç»“æœä¸º 3  
minby(this.file.tasks, (k) => k.due) //ç»“æœä¸º æœ€æ—©åˆ°æœŸçš„
```
### 2.8 `maxby(array, function)`è®¡ç®—æ•°ç»„çš„æœ€å¤§å€¼
ä½¿ç”¨æä¾›çš„å‡½æ•°è®¡ç®—æ•°ç»„çš„æœ€å¤§å€¼ã€‚
```js
maxby([1, 2, 3], (k) => k) //ç»“æœä¸º 3 
maxby([1, 2, 3], (k) => 0 - k) //ç»“æœä¸º 1  
maxby(this.file.tasks, (k) => k.due) //ç»“æœä¸º æœ€æ™šåˆ°æœŸçš„
```
## 3 å¯¹è±¡ã€æ•°ç»„å’Œå­—ç¬¦ä¸²æ“ä½œ
æ“ä½œå®¹å™¨å¯¹è±¡å†…éƒ¨å€¼çš„æ“ä½œã€‚
::: danger ä½¿ç”¨æ–¹æ³•
æ¨èå±•å¼€ä¸‹é¢çš„å¤§çº²ï¼ŒæŸ¥çœ‹ä½ éœ€è¦çš„å‡½æ•°ï¼Œåœ¨é€‰æ‹©ä½¿ç”¨ã€‚
:::
::: details ğŸ¥•3 å¯¹è±¡ã€æ•°ç»„å’Œå­—ç¬¦ä¸²æ“ä½œå¤§çº²(ç‚¹å‡»å±•å¼€)
```mermaid
  flowchart LR
      A("3 å¯¹è±¡ã€æ•°ç»„å’Œå­—ç¬¦ä¸²æ“") --> 1["contains()<br>1 åˆ¤æ–­åŒ…å«å†…å®¹"]
      A --> 2("containsword(list|string, value)<br>2 å•è¯å®Œå…¨åŒ¹é…ï¼Œä¸åŒºåˆ†å¤§å°å†™")
      A --> 3("extract(object, key1, key2, ...)<br>3 æå–å¤šä¸ªå­—æ®µ")
      A --> 4("sort(list)<br>4 å¯¹åˆ—è¡¨æ’åº")
      A --> 5("reverse(list)<br>5 åè½¬åˆ—è¡¨")
      A --> 6("length(object|array)<br>6 è¿”å›å¯¹è±¡çš„å­—æ®µæ•°")
      A --> 7("nonnull(array)<br>7 åˆ é™¤ç©ºå€¼")
      A --> 8("all(array)<br>8 æ•°ç»„ä¸­æ‰€æœ‰å€¼ä¸ºçœŸ")
      A --> 9("any(array)<br>9 æ•°ç»„ä»»ä½•å€¼éƒ½ä¸ºçœŸ")
      A --> 10("none(array)<br>10 æ•°ç»„ä¸­æ²¡æœ‰çœŸ")
      A --> 11("join(array, [delimiter])<br>11 æ‹¼æ¥å‡½æ•°")
      A --> 12("filter(array, predicate)<br>12 è¿‡æ»¤æ•°ç»„ä¸­å…ƒç´ ")
      A --> 13("map(array, func)<br>13 æ˜ å°„ç»“æœçš„åˆ—è¡¨")
```
:::
### 3.1 `contains()`Â and friends åˆ¤æ–­åŒ…å«å†…å®¹
ä¸ºäº†å¿«é€Ÿæ€»ç»“ï¼Œè¿™é‡Œæœ‰ä¸€äº›ä¾‹å­ï¼š
```js
contains("Hello", "Lo") = false   //è¡¨ç¤ºæ²¡æœ‰åŒ…å«ï¼Œè¿”å›å€¼ä¸ºå‡ false
contains("Hello", "lo") = true    // è¡¨ç¤ºåŒ…å«äº†ï¼Œè¿”å›å€¼ä¸ºçœŸ true
icontains("Hello", "Lo") = true   
icontains("Hello", "lo") = true    
econtains("Hello", "Lo") = false  
econtains("Hello", "lo") = true   
econtains(["this","is","example"], "ex") = false
econtains(["this","is","example"], "is") = true
```
::: tip
- å¾ˆå¸¸ç”¨çš„å‡½æ•°ï¼Œåˆ¤æ–­å®¹å™¨å†…æ˜¯å¦æœ‰æŒ‡å®šçš„å€¼  
- è¿”å›å€¼ä¸ºå¸ƒå°”å€¼ï¼Œtrue/false ã€‚å°±æ˜¯çœŸ/å‡
:::
#### 01 `contains(object|list|string, value)`åˆ¤æ–­åŒ…å«å€¼
ğŸŠæ£€æŸ¥æŒ‡å®šçš„**å®¹å™¨**ç±»å‹**æ˜¯å¦å…·æœ‰æŒ‡å®šçš„å€¼**ã€‚
- æ ¹æ®ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¯¹è±¡ã€åˆ—è¡¨è¿˜æ˜¯å­—ç¬¦ä¸²ï¼Œæ­¤å‡½æ•°çš„è¡Œä¸ºç•¥æœ‰ä¸åŒã€‚
- æ­¤å‡½æ•°**åŒºåˆ†å¤§å°å†™**ã€‚  
**å‡ ç§æƒ…å†µï¼š**  
- a.å¯¹äº**å¯¹è±¡**ğŸ¥•ï¼Œæ£€æŸ¥å¯¹è±¡æ˜¯å¦å…·æœ‰æŒ‡å®šåç§°çš„é”®ã€‚ä¾‹å¦‚ï¼Œ 
```js
contains(file, "ctime") = true 
contains(file, "day") = true (if file has a date in its title, false otherwise)
```
- b.å¯¹äº**åˆ—è¡¨**ğŸ¥’ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•æ•°ç»„å…ƒç´ ç­‰äºæŒ‡å®šå€¼ã€‚ä¾‹å¦‚ï¼Œ
```js
contains(list(1, 2, 3), 3) = true //è¿”å›å€¼ä¸ºçœŸ true
contains(list(), 1) = false       //è¿”å›å€¼ä¸ºå‡ false
```
- c.å¯¹äº**å­—ç¬¦ä¸²**ğŸŒï¼Œæ£€æŸ¥æŒ‡å®šå€¼æ˜¯å¦æ˜¯å­—ç¬¦ä¸²çš„å­å­—ç¬¦ä¸²ï¼ˆå³å†…éƒ¨ï¼‰ã€‚
```js
contains("hello", "lo") = true 
contains("yes", "no") = false
```
::: warning ç¤ºä¾‹
è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ç‡å¾ˆé«˜çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ç”¨ï¼š
- æŸ¥æ‰¾æ–‡ä»¶æ ‡é¢˜ä¸­ï¼ŒåŒ…å«â€œå’–å•¡è±†æ–‡æ¡£â€çš„æ–‡ä»¶ï¼š`contains(file.name, "ctime")`
- å¯¹è±¡ï¼Œå¯ä»¥æ˜¯éšå¼å­—æ®µä¸­çš„å†…å®¹ã€‚å¯æŸ¥é˜…[éšå¼å­—æ®µæ–‡æ¡£](/zh/advanced/dataviewè¿›é˜¶(1).md#éšå¼å­—æ®µ)
:::
::: code-tabs
@tab ç®€å•ç¤ºä¾‹
```sql
where contains(file.name, "å’–å•¡è±†æ–‡æ¡£") = true
```
@tab:active æ–‡ä»¶åä¸­åŒ…å«â€œå…³é”®å­—â€
```sql
table 
	file.mtime as "ä¿®æ”¹æ—¶é—´"
from ""
where contains(file.name, "å’–å•¡è±†æ–‡æ¡£") = true
sort file.name desc
```
@tab æ–‡ä»¶å ä¸åŒ…å« â€œå…³é”®å­—â€
```sql
table 
	file.mtime as "ä¿®æ”¹æ—¶é—´"
from ""
where !contains(file.name, "å’–å•¡è±†æ–‡æ¡£") = true
sort file.name desc
```
@tab æ ‡ç­¾ä¸­åŒ…å«â€œå…³é”®å­—â€
```sql
table 
	file.mtime as "ä¿®æ”¹æ—¶é—´"
from ""
where contains(file.tags, "å’–å•¡è±†æ–‡æ¡£") = true
sort file.name desc
```
@tab frontmatterä¸­åŒ…å«â€œå…³é”®å­—â€
```sql
table 
	file.mtime as "ä¿®æ”¹æ—¶é—´",
	file.name as "æ–‡ä»¶å"
from ""
where contains(file.frontmatter, "è¯­è¨€") = true
sort file.name desc
```
:::
::: tip ç”¨!å–å
- ç”¨`!`æ„Ÿå¹å·ï¼Œè¡¨ç¤ºå¦å®šçš„æ„æ€ï¼Œæ¯”å¦‚è¿™é‡Œæ˜¯ `!contains()` è¡¨ç¤ºä¸åŒ…å«
- ä¹Ÿå¯ä»¥ç”¨`flase`è¡¨ç¤ºå¦å®šï¼Œ`where contains(file.tags, "å’–å•¡è±†æ–‡æ¡£") = flase`
- å¸ƒå°”å€¼çœŸå‡ï¼Œä¹Ÿå°±æ˜¯`true`å’Œ`flase`ï¼Œä»–ä»¬æ˜¯å¯¹åº”å…³ç³»ï¼Œç»å¸¸ç”¨æ¥åˆ¤æ–­æ¡ä»¶æ˜¯å¦æˆç«‹ã€‚
:::


#### 02 `icontains(object|list|string, value)`åˆ¤æ–­åŒ…å«å€¼(ä¸åŒºåˆ†å¤§å°å†™)
`contains()`Â çš„ä¸åŒºåˆ†å¤§å°å†™çš„ç‰ˆæœ¬ã€‚
#### 03 `econtains(object|list|string, value)`åˆ¤æ–­å®Œå…¨åŒ¹å€¼(åŒºåˆ†å¤§å°å†™)
**exact match ç²¾ç¡®åŒ…å«**ï¼šæ£€æŸ¥æ˜¯å¦åœ¨<u>å­—ç¬¦ä¸²</u>/<u>åˆ—è¡¨</u>ä¸­æ‰¾åˆ°**å®Œå…¨åŒ¹é…**ã€‚æ­¤å‡½æ•°åŒºåˆ†å¤§å°å†™ã€‚
- å¯¹äºå­—ç¬¦ä¸²ğŸŒï¼Œå®ƒçš„è¡Œä¸ºä¸Â `contains()`Â å®Œå…¨ä¸€æ ·ã€‚
```js
econtains("Hello", "Lo") = false  //è¿”å›å€¼ä¸ºå‡ false    
econtains("Hello", "lo") = true  //è¿”å›å€¼ä¸ºçœŸ true
```
 - å¯¹äºåˆ—è¡¨ğŸ¥’ï¼Œå®ƒä¼šæ£€æŸ¥ç¡®åˆ‡çš„å•è¯æ˜¯å¦åœ¨åˆ—è¡¨ä¸­ã€‚
```js
econtains(["These", "are", "words"], "word") = false  //è¿”å›å€¼ä¸ºå‡ false   
econtains(["These", "are", "words"], "words") = true  //è¿”å›å€¼ä¸ºçœŸ true  
```
-  å¯¹äºå¯¹è±¡ğŸ¥•ï¼Œå®ƒæ£€æŸ¥å¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨ç¡®åˆ‡çš„é”®åã€‚å®ƒä¸è¿›è¡Œé€’å½’æ£€æŸ¥ã€‚
```js
econtains({key:"value", pairs:"here"}, "here") = false  //è¿”å›å€¼ä¸ºå‡ false    
econtains({key:"value", pairs:"here"}, "key") = true   //è¿”å›å€¼ä¸ºçœŸ true
econtains({key:"value", recur:{recurkey: "val"}}, "value") = false  //è¿”å›å€¼ä¸ºå‡ false   
econtains({key:"value", recur:{recurkey: "val"}}, "Recur") = false   //è¿”å›å€¼ä¸ºå‡ false   
econtains({key:"value", recur:{recurkey: "val"}}, "recurkey") = false  //è¿”å›å€¼ä¸ºå‡ false   
```
### 3.2 `containsword(list|string, value)`å•è¯å®Œå…¨åŒ¹é…ï¼Œä¸åŒºåˆ†å¤§å°å†™
æ£€æŸ¥å€¼Â `value`Â æ˜¯å¦ä¸å­—ç¬¦ä¸²Â `string`Â æˆ–åˆ—è¡¨Â `list`Â ä¸­çš„å•è¯**å®Œå…¨åŒ¹é…**ã€‚
- è¿™æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ã€‚
- å¯¹äºä¸åŒç±»å‹çš„è¾“å…¥ï¼Œè¾“å‡ºæ˜¯ä¸åŒçš„ï¼Œè¯·å‚è§ç¤ºä¾‹ã€‚
**åˆ†ç±»**  
- å¯¹äºå­—ç¬¦ä¸²ğŸŒï¼Œå®ƒæ£€æŸ¥æŒ‡å®šå­—ç¬¦ä¸²ä¸­æ˜¯å¦å­˜åœ¨è¯¥è¯ã€‚
```js
containsword("word", "word") = true // è¿”å›å€¼ä¸ºçœŸ true  
containsword("word", "Word") = true // è¿”å›å€¼ä¸ºçœŸ true  
containsword("words", "Word") = false // è¿”å›å€¼ä¸ºå‡ false  
containsword("Hello there!, "hello") = true // è¿”å›å€¼ä¸ºçœŸ true  
containsword("Hello there!, "HeLLo") = true // è¿”å›å€¼ä¸ºçœŸ true  
containsword("Hello there chaps!, "chap") = false  // è¿”å›å€¼ä¸ºå‡ false  
containsword("Hello there chaps!, "chaps") = true // è¿”å›å€¼ä¸ºçœŸ true  
```
- å¯¹äºåˆ—è¡¨ğŸ¥’ï¼Œå®ƒè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼åˆ—è¡¨ï¼ŒæŒ‡ç¤ºæ˜¯å¦æ‰¾åˆ°å•è¯çš„**ä¸åŒºåˆ†å¤§å°å†™**çš„ç²¾**ç¡®åŒ¹é…**é¡¹ã€‚    
```js
containsword(["I have no words.", "words"], "Word") = [false, false]  
containsword(["word", "Words"], "Word") = [true, false]   
containsword(["Word", "Words in word"], "WORD") = [true, true]
```
### 3.3 `extract(object, key1, key2, ...)`æå–å¤šä¸ªå­—æ®µ
ä»ä¸€ä¸ªå¯¹è±¡ä¸­æå–å¤šä¸ªå­—æ®µï¼Œåˆ›å»ºä¸€ä¸ªä»…åŒ…å«è¿™äº›å­—æ®µçš„æ–°å¯¹è±¡ã€‚
```js
extract(file, "ctime", "mtime") = object("ctime", file.ctime, "mtime", file.mtime) 
extract(object("test", 1)) = object()
```
### 3.4 `sort(list)`å¯¹åˆ—è¡¨æ’åº
å¯¹åˆ—è¡¨ğŸ¥’è¿›è¡Œæ’åºï¼ŒæŒ‰æ’åºé¡ºåºè¿”å›æ–°åˆ—è¡¨ã€‚
```js
sort(list(3, 2, 1)) = list(1, 2, 3)   
sort(list("a", "b", "aa")) = list("a", "aa", "b")
```
### 3.5 `reverse(list)`åè½¬åˆ—è¡¨
åè½¬åˆ—è¡¨ï¼Œä»¥ç›¸åçš„é¡ºåºè¿”å›æ–°åˆ—è¡¨ã€‚
```js
reverse(list(1, 2, 3)) = list(3, 2, 1) 
reverse(list("a", "b", "c")) = list("c", "b", "a")
```
### 3.6 `length(object|array)`è¿”å›å¯¹è±¡çš„å­—æ®µæ•°
è¿”å›å¯¹è±¡ä¸­çš„å­—æ®µæ•°ï¼Œæˆ–æ•°ç»„ä¸­çš„æ¡ç›®æ•°ã€‚
```js
length([]) = 0 // è·å–æ•°ç»„ä¸­çš„æ¡ç›®ï¼Œæ˜¯0æ¡
length([1, 2, 3]) = 3 // è·å–æ•°ç»„ä¸­çš„æ¡ç›®ï¼Œæ˜¯3æ¡
length(object("hello", 1, "goodbye", 2)) = 2 //å¯¹è±¡ä¸­çš„å­—æ®µæ•°
```
### 3.7 `nonnull(array)`åˆ é™¤ç©ºå€¼
è¿”å›ä¸€ä¸ªåˆ é™¤äº†æ‰€æœ‰ç©ºå€¼çš„æ–°æ•°ç»„ã€‚
::: tip å¸¸ç”¨å‡½æ•°
åˆ é™¤æ‰€æœ‰ç©ºå€¼ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ•°ç»„ã€‚  
ç”¨äºæ¸…æ´—æ•°æ®
:::
```js
nonnull([]) = [] 
nonnull([null, false]) = [false] 
nonnull([1, 2, 3]) = [1, 2, 3]
```
### 3.8 â°`all(array)`æ•°ç»„ä¸­æ‰€æœ‰å€¼ä¸ºçœŸ
- ä»…å½“æ•°ç»„ä¸­çš„æ‰€æœ‰å€¼éƒ½ä¸ºçœŸæ—¶æ‰è¿”å›Â `true`Â ã€‚
- æ‚¨è¿˜å¯ä»¥å°†å¤šä¸ªå‚æ•°ä¼ é€’ç»™æ­¤å‡½æ•°ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒä»…åœ¨æ‰€æœ‰å‚æ•°éƒ½ä¸ºçœŸæ—¶æ‰è¿”å›Â `true`Â ã€‚
```js
all([1, 2, 3]) = true   // è¿”å›å€¼ä¸ºçœŸ true  
all([true, false]) = false   // è¿”å›å€¼ä¸ºå‡ false  
all(true, false) = false   // è¿”å›å€¼ä¸ºå‡ false  
all(true, true, true) = true  // è¿”å›å€¼ä¸ºçœŸ true  
```
æ‚¨å¯ä»¥å°†å‡½æ•°ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ï¼Œä»¥ä¾¿ä»…å½“æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½ä¸==è°“è¯==åŒ¹é…æ—¶æ‰è¿”å› trueã€‚
```js
all([1, 2, 3], (x) => x > 0) = true // è¿”å›å€¼ä¸ºçœŸ true  
all([1, 2, 3], (x) => x > 1) = false // è¿”å›å€¼ä¸ºå‡ false  
all(["apple", "pie", 3], (x) => typeof(x) = "string") = false
```
**è§£è¯»ï¼š**  
- é¦–å…ˆï¼š`(x) => x > 0`  è¿™æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œ å·¦è¾¹æ˜¯å‚æ•°ï¼Œå³è¾¹æ˜¯è¡¨è¾¾å¼ï¼Œæ ¹æ®å·¦è¾¹çš„å‚æ•°è®¡ç®—å³è¾¹è¡¨è¾¾å¼çš„ç»“æœã€‚
- ç„¶åï¼Œå½“`[åˆ—è¡¨]`åˆ—è¡¨ä¸­çš„æ•°å€¼ï¼Œä¾æ¬¡å»å¯¹æ¯”ï¼Œå°±æ˜¯`(1) => x > 0`ï¼Œè¿”å›çœŸï¼Œ2,3éƒ½æ˜¯çœŸï¼Œåˆ™allå‡½æ•°ä¹Ÿè¿”å›çœŸ ã€‚
- ç„¶åï¼Œä»¥ä¸Šç¬¬äºŒä¸ªï¼Œä»åˆ—è¡¨ä¸­åšä¸ºå‚æ•°ï¼Œ`(1) => x > 1` å‚æ•°æ˜¯1ï¼Œè®¡ç®—x >1 ä¸ºå‡ã€‚å› æ­¤allå‡½æ•°åªèƒ½è¿”å›å‡ï¼Œå› ä¸ºä¸æ˜¯æ‰€æœ‰çš„å€¼éƒ½ä¸ºçœŸã€‚

::: tip è°“è¯ï¼ˆpredicateï¼‰
- SQL è°“è¯å°±æ˜¯è¿”å›å€¼ä¸ºÂ `TRUE`ã€`FALSE`Â æˆ–Â `UNKNOWN`Â çš„**è¡¨è¾¾å¼**ã€‚
- =ã€<ã€>ã€<> ç­‰æ¯”è¾ƒè¿ç®—ç¬¦ï¼Œå…¶æ­£å¼çš„åç§°å°±æ˜¯æ¯”è¾ƒè°“è¯
- é€šä¿—æ¥è®²è°“è¯å°±æ˜¯ SQL å¸¸ç”¨çš„å‡½æ•° ä¸­ä»‹ç»çš„å‡½æ•°ä¸­çš„ä¸€ç§ï¼Œæ˜¯éœ€è¦æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„å‡½æ•°ï¼Œè¯¥æ¡ä»¶å°±æ˜¯è¿”å›å€¼æ˜¯çœŸå€¼ã€‚
- å¯¹é€šå¸¸çš„å‡½æ•°æ¥è¯´ï¼Œè¿”å›å€¼æœ‰å¯èƒ½æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²æˆ–è€…æ—¥æœŸç­‰ï¼Œä½†æ˜¯è°“è¯çš„è¿”å›å€¼å…¨éƒ½æ˜¯çœŸå€¼ï¼ˆTRUE/FALSE/UNKNOWNï¼‰ã€‚è¿™ä¹Ÿæ˜¯è°“è¯å’Œå‡½æ•°çš„æœ€å¤§åŒºåˆ«ã€‚
:::
::: tip =>ç®­å¤´å‡½æ•°
(a, b) => a + b è¡¨ç¤ºä¸€ä¸ªå‡½æ•°æ¥å—ä¸¤ä¸ªåä¸º a å’Œ b çš„å‚æ•°ã€‚
åœ¨æ‰§è¡Œæ—¶ï¼Œå®ƒå°†å¯¹è¡¨è¾¾å¼ **a + b æ±‚å€¼**ï¼Œå¹¶è¿”å›è®¡ç®—ç»“æœ

è¯­æ³•ï¼š==(å‚æ•°) => è¡¨è¾¾å¼==  
- å³ä¾§æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼šå‡½æ•°è®¡ç®—è¡¨è¾¾å¼å¹¶è¿”å›å…¶ç»“æœ
- å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œåˆ™å¯ä»¥çœç•¥æ‹¬å·ï¼Œä¾‹å¦‚ `n => n*2`
:::

### 3.9 `any(array)`æ•°ç»„ä»»ä½•å€¼éƒ½ä¸ºçœŸ
å¦‚æœæ•°ç»„ä¸­çš„**ä»»ä½•å€¼éƒ½ä¸ºçœŸ**ï¼Œåˆ™è¿”å›Â `true`Â ã€‚
æ‚¨è¿˜å¯ä»¥å°†å¤šä¸ªå‚æ•°ä¼ é€’ç»™æ­¤å‡½æ•°ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹å¦‚æœä»»ä½•å‚æ•°ä¸ºçœŸï¼Œå®ƒä¼šè¿”å›Â `true`Â ã€‚
```js
any(list(1, 2, 3)) = true // è¿”å›å€¼ä¸ºçœŸ true  
any(list(true, false)) = true // è¿”å›å€¼ä¸ºçœŸ true  
any(list(false, false, false)) = false // è¿”å›å€¼ä¸ºå‡ false  
any(true, false) = true // è¿”å›å€¼ä¸ºçœŸ true  
any(false, false) = false// è¿”å›å€¼ä¸ºå‡ false  
```
æ‚¨å¯ä»¥å°†å‡½æ•°ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ï¼Œä»¥ä¾¿ä»…å½“æ•°ç»„ä¸­çš„ä»»ä½•å…ƒç´ ä¸**è°“è¯**åŒ¹é…æ—¶æ‰è¿”å› trueã€‚
```js
any(list(1, 2, 3), (x) => x > 2) = true // è¿”å›å€¼ä¸ºçœŸ true  
any(list(1, 2, 3), (x) => x = 0) = false// è¿”å›å€¼ä¸ºå‡ false  
```
### 3.10 â°`none(array)`æ•°ç»„ä¸­æ²¡æœ‰çœŸ
å¦‚æœæ•°ç»„ä¸­æ²¡æœ‰ä»»ä½•å€¼æ˜¯çœŸï¼Œåˆ™è¿”å›Â `true`Â ã€‚
```js
none([]) = true // è¿”å›å€¼ä¸ºçœŸ true  
none([false, false]) = true // è¿”å›å€¼ä¸ºçœŸ true  
none([false, true]) = false // è¿”å›å€¼ä¸ºå‡ false  
none([1, 2, 3]) = false// è¿”å›å€¼ä¸ºå‡ false  
```

æ‚¨å¯ä»¥å°†å‡½æ•°ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ï¼Œä»¥ä¾¿ä»…åœ¨æ•°ç»„ä¸­æ²¡æœ‰å…ƒç´ ä¸**è°“è¯**åŒ¹é…æ—¶æ‰è¿”å› trueã€‚
```js
none([1, 2, 3], (x) => x = 0) = true // è¿”å›å€¼ä¸ºçœŸ true  
none([true, true], (x) => x = false) = true // è¿”å›å€¼ä¸ºçœŸ true  
none(["Apple", "Pi", "Banana"], (x) => startswith(x, "A")) = false// è¿”å›å€¼ä¸ºå‡ false  
```
::: tip è°“è¯ï¼ˆpredicateï¼‰
- SQL è°“è¯å°±æ˜¯è¿”å›å€¼ä¸ºÂ `TRUE`ã€`FALSE`Â æˆ–Â `UNKNOWN`Â çš„**è¡¨è¾¾å¼**ã€‚
- =ã€<ã€>ã€<> ç­‰æ¯”è¾ƒè¿ç®—ç¬¦ï¼Œå…¶æ­£å¼çš„åç§°å°±æ˜¯æ¯”è¾ƒè°“è¯
- é€šä¿—æ¥è®²è°“è¯å°±æ˜¯ SQL å¸¸ç”¨çš„å‡½æ•° ä¸­ä»‹ç»çš„å‡½æ•°ä¸­çš„ä¸€ç§ï¼Œæ˜¯éœ€è¦æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„å‡½æ•°ï¼Œè¯¥æ¡ä»¶å°±æ˜¯è¿”å›å€¼æ˜¯çœŸå€¼ã€‚
- å¯¹é€šå¸¸çš„å‡½æ•°æ¥è¯´ï¼Œè¿”å›å€¼æœ‰å¯èƒ½æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²æˆ–è€…æ—¥æœŸç­‰ï¼Œä½†æ˜¯è°“è¯çš„è¿”å›å€¼å…¨éƒ½æ˜¯çœŸå€¼ï¼ˆTRUE/FALSE/UNKNOWNï¼‰ã€‚è¿™ä¹Ÿæ˜¯è°“è¯å’Œå‡½æ•°çš„æœ€å¤§åŒºåˆ«ã€‚
:::
### 3.11 `join(array, [delimiter])`æ‹¼æ¥å‡½æ•°
å°†æ•°ç»„ä¸­çš„å…ƒç´ è¿æ¥æˆå•ä¸ªå­—ç¬¦ä¸²ï¼ˆå³ï¼Œå°†å®ƒä»¬å…¨éƒ¨å‘ˆç°åœ¨åŒä¸€è¡Œä¸Šï¼‰ã€‚
- å¦‚æœæä¾›ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™æ¯ä¸ªå…ƒç´ å°†ç”±æŒ‡å®šçš„åˆ†éš”ç¬¦åˆ†éš”ã€‚
```js
join(list(1, 2, 3)) = "1, 2, 3"  // å°†listä¸­çš„å…ƒç´ æ‹¼æ¥æˆå•ä¸ªå­—ç¬¦
join(list(1, 2, 3), " ") = "1 2 3" // å°†liståˆ—è¡¨ä¸­çš„å…ƒç´ æ‹¼æ¥ï¼Œä½¿ç”¨ç©ºæ ¼åˆ†éš”
join(6) = "6" 
join(list()) = ""
```
### 3.12 â°`filter(array, predicate)`è¿‡æ»¤æ•°ç»„ä¸­å…ƒç´ 

æ ¹æ®è°“è¯è¿‡æ»¤æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œè¿”å›åŒ¹é…å…ƒç´ çš„æ–°åˆ—è¡¨ã€‚
```js
filter([1, 2, 3], (x) => x >= 2) = [2, 3] 
filter(["yes", "no", "yas"], (x) => startswith(x, "y")) = ["yes", "yas"]
```

**è§£è¯»**ï¼šç¬¬ä¸€ä¸ªç¤ºä¾‹    
- `filter([1, 2, 3], (x) => x >= 2) = [2, 3] `
- æ ¹æ®è°“è¯è¿‡æ»¤æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œè°“è¯æ˜¯ç®­å¤´å‡½æ•°çš„è¡¨è¾¾å¼æ˜¯ `x >=2` ï¼Œé‚£ä¹ˆ1,2,3 åˆ†åˆ«å½“å‚æ•°ã€‚æœ€åç•™ä¸‹æ¥[2,3]ã€‚

**è§£è¯»**ï¼šç¬¬äºŒä¸ªç¤ºä¾‹    
- `filter(["yes", "no", "yas"], (x) => startswith(x, "y")) = ["yes", "yas"]` 
- `(x)`æ˜¯å‚æ•°ï¼Œåé¢æ˜¯è¡¨è¾¾å¼startswith(x, "y") ï¼Œxå‚æ•°ä¸­ç”¨`y`å¼€å¤´çš„æ•°æ®

::: tip è°“è¯ï¼ˆpredicateï¼‰
- SQL è°“è¯å°±æ˜¯è¿”å›å€¼ä¸ºÂ `TRUE`ã€`FALSE`Â æˆ–Â `UNKNOWN`Â çš„**è¡¨è¾¾å¼**ã€‚
- =ã€<ã€>ã€<> ç­‰æ¯”è¾ƒè¿ç®—ç¬¦ï¼Œå…¶æ­£å¼çš„åç§°å°±æ˜¯æ¯”è¾ƒè°“è¯
- é€šä¿—æ¥è®²è°“è¯å°±æ˜¯ SQL å¸¸ç”¨çš„å‡½æ•° ä¸­ä»‹ç»çš„å‡½æ•°ä¸­çš„ä¸€ç§ï¼Œæ˜¯éœ€è¦æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„å‡½æ•°ï¼Œè¯¥æ¡ä»¶å°±æ˜¯è¿”å›å€¼æ˜¯çœŸå€¼ã€‚
- å¯¹é€šå¸¸çš„å‡½æ•°æ¥è¯´ï¼Œè¿”å›å€¼æœ‰å¯èƒ½æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²æˆ–è€…æ—¥æœŸç­‰ï¼Œä½†æ˜¯è°“è¯çš„è¿”å›å€¼å…¨éƒ½æ˜¯çœŸå€¼ï¼ˆTRUE/FALSE/UNKNOWNï¼‰ã€‚è¿™ä¹Ÿæ˜¯è°“è¯å’Œå‡½æ•°çš„æœ€å¤§åŒºåˆ«ã€‚
:::
### 3.13 â°`map(array, func)`æ˜ å°„ç»“æœçš„åˆ—è¡¨â“
Applies the function to each element in the array, returning a list of the mapped results.  
å°†å‡½æ•°åº”ç”¨äºæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œè¿”å›æ˜ å°„ç»“æœçš„åˆ—è¡¨ã€‚
```js
map([1, 2, 3], (x) => x + 2) = [3, 4, 5] 
map(["yes", "no"], (x) => x + "?") = ["yes?", "no?"]
```
---
## 4 String OperationsÂ å­—ç¬¦ä¸²æ“ä½œ
::: danger ä½¿ç”¨æ–¹æ³•
æ¨èå±•å¼€ä¸‹é¢çš„å¤§çº²ï¼ŒæŸ¥çœ‹ä½ éœ€è¦çš„å‡½æ•°ï¼Œåœ¨é€‰æ‹©ä½¿ç”¨ã€‚
:::
::: details ğŸ¥•4 å­—ç¬¦ä¸²æ“ä½œæ“ä½œå¤§çº²(ç‚¹å‡»å±•å¼€)
```mermaid
  flowchart LR
      A("4 å­—ç¬¦ä¸²æ“ä½œæ“") --> 1["regextest(pattern, string)<br>1 æ£€æŸ¥æ˜¯å¦åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼"]
      A --> 2("regexmatch(pattern, string)<br>2 æ­£åˆ™è¡¨è¾¾å¼æ£€æµ‹æ˜¯å¦ä¸æ•´ä¸ªå­—ç¬¦ä¸²åŒ¹é…")
      A --> 3("regexreplace(string, pattern, replacement)<br>3 æ­£åˆ™åŒ¹é…åæ›¿æ¢")
      A --> 4("replace(string, pattern, replacement)<br>4 æ›¿æ¢å­—ç¬¦ä¸²")
      A --> 5("lower(string)<br>5 å°†å­—ç¬¦ä¸²è½¬ä¸ºå°å†™")
      A --> 6("upper(string)<br>6 å°†å­—ç¬¦ä¸²è½¬ä¸ºå¤§å†™")
      A --> 7("split(string, delimiter, [limit])<br>7 æ‹†åˆ†å­—ç¬¦ä¸²")
      A --> 8("startswith(string, prefix)<br>8 æ£€æŸ¥æ˜¯å¦ä»¥æŒ‡å®šå‰ç¼€å¼€å¤´")
      A --> 9("endswith(string, suffix)<br>9 æ£€æŸ¥æ˜¯å¦ä»¥æŒ‡å®šçš„åç¼€ç»“å°¾")
      A --> 10("padleft(string, length, [padding])<br>10 åœ¨å·¦ä¾§æ·»åŠ å¡«å……å­—ç¬¦ä¸²è®©é•¿åº¦è¾¾æ ‡")
      A --> 11("padright(string, length, [padding])<br>11 åœ¨å³ä¾§ä¾§æ·»åŠ å¡«å……å­—ç¬¦ä¸²è®©é•¿åº¦è¾¾æ ‡")
      A --> 12("substring(string, start, [end])<br>12 æŒ‡å®šèŒƒå›´å–å€¼")
      A --> 13("truncate(string, length, [suffix])`<br>13 æŒ‰é•¿åº¦æˆªæ–­å­—ç¬¦ä¸²")
```
:::
### 4.1 `regextest(pattern, string)`æ£€æŸ¥æ˜¯å¦åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼
æ£€æŸ¥æ˜¯å¦å¯ä»¥åœ¨å­—ç¬¦ä¸²ä¸­æ‰¾åˆ°æŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ï¼ˆä½¿ç”¨ JavaScript æ­£åˆ™è¡¨è¾¾å¼å¼•æ“ï¼‰ã€‚

::: warning å¯ä»¥åªåŒ¹é…æ–‡æœ¬çš„ä¸€éƒ¨åˆ†
- è¿”å›å€¼æ˜¯å¸ƒå°”å€¼ï¼Œå°±æ˜¯ true æˆ–è€… false ï¼ŒçœŸæˆ–è€…å‡
- å¯ä»¥åªåŒ¹é…æ–‡æœ¬çš„ä¸€éƒ¨åˆ†
:::
```js
regextest("\w+", "hello") = true // è¿”å›å€¼ä¸ºçœŸ true  
regextest(".", "a") = true // è¿”å›å€¼ä¸ºçœŸ true  
regextest("yes|no", "maybe") = false // è¿”å›å€¼ä¸ºå‡ false  
regextest("what", "what's up dog?") = true// è¿”å›å€¼ä¸ºçœŸ true  
```
### 4.2 `regexmatch(pattern, string)`æ­£åˆ™è¡¨è¾¾å¼æ£€æµ‹æ˜¯å¦ä¸æ•´ä¸ªå­—ç¬¦ä¸²åŒ¹é…
ä½¿ç”¨ JavaScript æ­£åˆ™è¡¨è¾¾å¼å¼•æ“æ£€æŸ¥æŒ‡å®šçš„**æ­£åˆ™è¡¨è¾¾å¼**æ¨¡å¼æ˜¯å¦ä¸**æ•´ä¸ªå­—ç¬¦ä¸²åŒ¹é…**ã€‚è¿™ä¸Â `regextest`Â çš„ä¸åŒä¹‹å¤„åœ¨äº **regextest å¯ä»¥åªåŒ¹é…æ–‡æœ¬çš„ä¸€éƒ¨åˆ†**ã€‚
::: warning å¿…é¡»åŒ¹é…æ•´ä¸ªå­—ç¬¦
è¿™ä¸ªå¿…é¡»åŒ¹é…æ•´ä¸ªå­—ç¬¦ï¼Œä¸å¯ä»¥åªåŒ¹é…ä¸€éƒ¨åˆ†ã€‚åŒ¹é…ä¸€éƒ¨åˆ†å¯ä»¥ç”¨ regextest
:::
```js
regexmatch("\w+", "hello") = true // è¿”å›å€¼ä¸ºçœŸ true  
regexmatch(".", "a") = true // è¿”å›å€¼ä¸ºçœŸ true  
regexmatch("yes|no", "maybe") = false // è¿”å›å€¼ä¸ºå‡ false  
regexmatch("what", "what's up dog?") = false// è¿”å›å€¼ä¸ºå‡ false  
```
### 4.3 `regexreplace(string, pattern, replacement)`æ­£åˆ™åŒ¹é…åæ›¿æ¢
å°†æ­£åˆ™è¡¨è¾¾å¼Â `pattern`Â åœ¨Â `string`Â ä¸­åŒ¹é…çš„æ‰€æœ‰å®ä¾‹æ›¿æ¢ä¸ºÂ `replacement`Â ã€‚è¿™åœ¨åº•å±‚ä½¿ç”¨äº† JavaScript æ›¿æ¢æ–¹æ³•ï¼Œå› æ­¤æ‚¨å¯ä»¥ä½¿ç”¨Â `$1`Â ç­‰ç‰¹æ®Šå­—ç¬¦æ¥å¼•ç”¨ç¬¬ä¸€ä¸ªæ•è·ç»„ï¼Œç­‰ç­‰ã€‚
::: tip æ­£åˆ™åŒ¹é…åæ›¿æ¢
å°±æ˜¯ç”¨**æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…**ä¹‹åæ›¿æ¢å­—ç¬¦ä¸²
:::

```js
regexreplace("yes", "[ys]", "a") = "aea" 
regexreplace("Suite 1000", "\d+", "-") = "Suite -"
```
### 4.4 `replace(string, pattern, replacement)`æ›¿æ¢å­—ç¬¦ä¸²
å°†Â `string`Â ä¸­çš„æ‰€æœ‰Â `pattern`Â å®ä¾‹æ›¿æ¢ä¸ºÂ `replacement`Â ã€‚
::: tip æ™®é€šåŒ¹é…åæ›¿æ¢
æ™®é€šåŒ¹é…ä¹‹åæ›¿æ¢å­—ç¬¦ä¸²
:::
```js
replace("what", "wh", "h") = "hat" 
replace("The big dog chased the big cat.", "big", "small") = "The small dog chased the small cat." 
replace("test", "test", "no") = "no"
```
### 4.5 `lower(string)`å°†å­—ç¬¦ä¸²è½¬ä¸ºå°å†™
å°†å­—ç¬¦ä¸²å…¨éƒ¨è½¬ä¸ºå°å†™ã€‚(å­—é¢æ„æ€)
```js
lower("Test") = "test" 
lower("TEST") = "test"
```
### 4.6 `upper(string)`å°†å­—ç¬¦ä¸²è½¬ä¸ºå¤§å†™
å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå…¨éƒ¨å¤§å†™ã€‚(å­—é¢æ„æ€)
```js
upper("Test") = "TEST" 
upper("test") = "TEST"
```
### 4.7 `split(string, delimiter, [limit])`æ‹†åˆ†å­—ç¬¦ä¸²

æŒ‰æŒ‡å®šçš„åˆ†éš”ç¬¦å»æ‹†åˆ†å­—ç¬¦ä¸²ã€‚
- å¦‚æœæä¾›äº†ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œå®ƒä¼šé™åˆ¶å‘ç”Ÿçš„æ‹†åˆ†æ¬¡æ•°ã€‚
- åˆ†éš”ç¬¦å­—ç¬¦ä¸²è¢«è§£é‡Šä¸ºæ­£åˆ™è¡¨è¾¾å¼ã€‚  
å¦‚æœåˆ†éš”ç¬¦ä¸­æœ‰æ•è·ç»„ï¼Œåˆ™åŒ¹é…çš„æ‹¼æ¥æˆç»“æœæ•°ç»„ï¼Œä¸åŒ¹é…çš„æ•è·ä¸ºç©ºä¸²ã€‚
```js
split("hello world", " ") = list("hello", "world") 
split("hello  world", "\s") = list("hello", "world") 
split("hello there world", " ", 2) = list("hello", "there") 
split("hello there world", "(t?here)") = list("hello ", "there", " world") 
split("hello there world", "( )(x)?") = list("hello", " ", "", "there", " ", "", "world")
```
### 4.8 `startswith(string, prefix)`æ£€æŸ¥æ˜¯å¦ä»¥æŒ‡å®šå‰ç¼€å¼€å¤´
æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šå‰ç¼€å¼€å¤´ã€‚
```js
startswith("yes", "ye") = true // è¿”å›å€¼ä¸ºçœŸ true  
startswith("path/to/something", "path/") = true // è¿”å›å€¼ä¸ºçœŸ true  
startswith("yes", "no") = false // è¿”å›å€¼ä¸ºå‡ false  
```
### 4.9 `endswith(string, suffix)`æ£€æŸ¥æ˜¯å¦ä»¥æŒ‡å®šçš„åç¼€ç»“å°¾
æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„åç¼€ç»“å°¾ã€‚
```js
endswith("yes", "es") = true 
endswith("path/to/something", "something") = true 
endswith("yes", "ye") = false
```
### 4.10 `padleft(string, length, [padding])`åœ¨å·¦ä¾§æ·»åŠ å¡«å……å­—ç¬¦ä¸²è®©é•¿åº¦è¾¾æ ‡

é€šè¿‡åœ¨å·¦ä¾§æ·»åŠ å¡«å……æ¥å°†å­—ç¬¦ä¸²å¡«å……åˆ°æ‰€éœ€çš„é•¿åº¦ã€‚å¦‚
- æœçœç•¥å¡«å……å­—ç¬¦ï¼Œé»˜è®¤æƒ…å†µä¸‹å°†ä½¿ç”¨ç©ºæ ¼ã€‚
```js
padleft("hello", 7) = "  hello" 
padleft("yes", 5, "!") = "!!yes"
```
### 4.11 `padright(string, length, [padding])`åœ¨å³ä¾§ä¾§æ·»åŠ å¡«å……å­—ç¬¦ä¸²è®©é•¿åº¦è¾¾æ ‡
ç­‰åŒäºÂ `padleft`Â ï¼Œä½†æ”¹ä¸ºå‘å³å¡«å……ã€‚
```js
padright("hello", 7) = "hello  " 
padright("yes", 5, "!") = "yes!!"
```
### 4.12 `substring(string, start, [end])`æŒ‡å®šèŒƒå›´å–å€¼
å–ä¸€æ®µå­—ç¬¦ä¸²ï¼Œä»Â `start`Â å¼€å§‹åˆ°Â `end`Â ç»“æŸï¼ˆå¦‚æœæœªæŒ‡å®šï¼Œåˆ™ä¸ºå­—ç¬¦ä¸²çš„æœ«å°¾ï¼‰ã€‚
```js
substring("hello", 0, 2) = "he" 
substring("hello", 2, 4) = "ll" 
substring("hello", 2) = "llo" 
substring("hello", 0) = "hello"
```
### 4.13 `truncate(string, length, [suffix])`æŒ‰é•¿åº¦æˆªæ–­å­—ç¬¦ä¸²
å°†å­—ç¬¦ä¸²æˆªæ–­ä¸ºæœ€å¤šæŒ‡å®šé•¿åº¦ï¼ŒåŒ…æ‹¬Â `suffix`Â ï¼ˆé»˜è®¤ä¸ºÂ `...`Â ï¼‰ã€‚é€šå¸¸ç”¨äºåˆ‡æ–­è¡¨æ ¼ä¸­çš„é•¿æ–‡æœ¬ã€‚
```js
truncate("Hello there!", 8) = "Hello..." 
truncate("Hello there!", 8, "/") = "Hello t/" 
truncate("Hello there!", 10) = "Hello t..." 
truncate("Hello there!", 10, "!") = "Hello the!" 
truncate("Hello there!", 20) = "Hello there!"
```
## 5 Utility FunctionsÂ å·¥å…·å‡½æ•°
::: tip æ‰€è°“å·¥å…·å‡½æ•°
ä¸ºäº†å‡†ç¡®è¡¨è¾¾è¿™ä¸ªæ¦‚å¿µï¼Œä¸“é—¨ç ”ç©¶äº†ä¸€äº›èµ„æ–™ï¼Œæ€»ç»“æ¦‚å¿µå¦‚ä¸‹ï¼š  
Utility Functions æ˜¯ä¸ªçº¦å®šä¿—æˆçš„ç”¨æ³•ï¼Œåœ¨å¼€å‘è¯­å¢ƒä¸‹ï¼Œå…¶å¤æ•°å½¢å¼è¡¨è¾¾ä¸æŸä¸ªä¸šåŠ¡æµ/åº”ç”¨ç›¸å…³çš„**å·¥å…·é›†**ï¼Œä¹Ÿå°±æ˜¯**å·¥å…·ç®±**çš„å«ä¹‰ã€‚
:::
::: danger ä½¿ç”¨æ–¹æ³•
æ¨èå±•å¼€ä¸‹é¢çš„å¤§çº²ï¼ŒæŸ¥çœ‹ä½ éœ€è¦çš„å‡½æ•°ï¼Œåœ¨é€‰æ‹©ä½¿ç”¨ã€‚
:::
::: details ğŸ¥•5 å·¥å…·å‡½æ•°-æ“ä½œå¤§çº²(ç‚¹å‡»å±•å¼€)
```mermaid
  flowchart LR
      A("5 å·¥å…·å‡½æ•°") --> 1["default(field, value) <br>1 é»˜è®¤å€¼"]
      A --> 2("choice(bool, left, right)<br>2 é€‰æ‹©å™¨ä»¿ifåˆ¤æ–­")
      A --> 3("striptime(date)<br>3 å»æ‰æ—¥æœŸçš„æ—¶é—´éƒ¨åˆ†")
      A --> 4("dateformat(date|datetime, string)<br>4 æ ¼å¼åŒ– Dataview æ—¥æœŸ")
      A --> 5("localtime(date)<br>5 å˜æ›´ä¸ºæœ¬åœ°æ—¶é—´")
      A --> 6("meta(link)<br>6 è·å–åŒ…å«é“¾æ¥å…ƒæ•°æ®çš„å¯¹è±¡")
      6 --> 6.1("meta(link).display`<br>1 è·å–é“¾æ¥çš„æ˜¾ç¤ºæ–‡æœ¬")
      6 --> 6.2("meta(link).embed<br>2 åˆ¤æ–­é“¾æ¥æ˜¯å¦åµŒå…¥")
      6 --> 6.3("meta(link).path<br>3 è·å–é“¾æ¥çš„è·¯å¾„")
      6 --> 6.4("meta(link).subpath<br>4 è·å–é“¾æ¥çš„å­è·¯å¾„")
      6 --> 6.5("meta(link).type<br>5 åˆ¤æ–­é“¾æ¥çš„ç±»å‹æ˜¯<br>æ–‡æœ¬ã€æ ‡é¢˜è¿˜æ˜¯å—")
```
:::
### 5.1 â°`default(field, value)` é»˜è®¤å€¼

å¦‚æœÂ `field`Â ä¸ºç©ºï¼Œåˆ™è¿”å›Â `value`Â ï¼›å¦åˆ™è¿”å›Â `field`Â ã€‚ç”¨äºç”¨é»˜è®¤å€¼æ›¿æ¢ç©ºå€¼ã€‚
- ä¾‹å¦‚ï¼Œè¦æ˜¾ç¤ºå°šæœªå®Œæˆçš„é¡¹ç›®ï¼Œè¯·ä½¿ç”¨Â `"incomplete"`Â ä½œä¸ºå®ƒä»¬çš„é»˜è®¤å€¼ï¼š
`default(dateCompleted, "incomplete")`
 
é»˜è®¤å€¼åœ¨ä¸¤ä¸ªå‚æ•°ä¸­éƒ½æ˜¯çŸ¢é‡åŒ–çš„ï¼›å¦‚æœæ‚¨éœ€è¦åœ¨åˆ—è¡¨å‚æ•°ä¸Šæ˜¾å¼ä½¿ç”¨é»˜è®¤å€¼ï¼Œè¯·ä½¿ç”¨Â `ldefault`Â ï¼Œå®ƒä¸é»˜è®¤å€¼ç›¸åŒä½†æœªçŸ¢é‡åŒ–ã€‚
```js
default(list(1, 2, null), 3) = list(1, 2, 3) 
ldefault(list(1, 2, null), 3) = list(1, 2, null)
```
### 5.2 â°`choice(bool, left, right)`é€‰æ‹©å™¨ä»¿ifåˆ¤æ–­â­ï¸
åŸå§‹çš„ if è¯­å¥â€”â€”å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸ºçœŸï¼Œåˆ™è¿”å› `left`ï¼›å¦åˆ™ï¼Œ`è¿”å›right`ã€‚
```js
choice(true, "yes", "no") = "yes" // å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸ºçœŸï¼Œåˆ™è¿”å› `left`ï¼›
choice(false, "yes", "no") = "no" // å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå‡ï¼Œåˆ™è¿”å› `right`ï¼›
choice(x > 4, y, z) = y      // if x > 4, else z
```
::: tip é‡è¦çš„å‡½æ•°
choice()å‡½æ•°æ˜¯å¾ˆé‡è¦çš„ä¸€ä¸ªå‡½æ•°ï¼Œèƒ½å¤Ÿå®ç°ç±»ä¼¼ if...elseçš„æ•ˆæœï¼Œå¦‚æœ...å¦åˆ™

å¯ä»¥ç”¨ä»–å®ç°å¾ˆå¤šé€‰æ‹©çš„æ•ˆæœã€‚
:::
```sql
// æ³¨æ„ï¼š
// è¿™é‡Œéœ€è¦å¤åˆ¶åˆ° dataview ä»£ç  block ä¸­
//
TABLE WITHOUT ID
  choice(length(filter(file.tasks, (t) => regexmatch(".*#tweet.*", t.text) and !t.completed)) > 0, "", "") as "Need to Post",
  length(filter(file.tasks, (t) => regexmatch(".*#tweet.*", t.text))) as "Ghost Tasks",
  length(filter(file.tasks.completed, (t) => t)) as "Done Tasks",
  length(file.tasks) as "Total Tasks",
  striptime(date(today)) - striptime(file.ctime) as "Duration",
  dateformat(date(file.mtime), "yyyy-MM-dd") as "Last Modified",
  file.link as "Source"
FROM "4.permanent/permanent-2022"
SORT date desc
LIMIT 7
```



### 5.3 `striptime(date)`å»æ‰æ—¥æœŸçš„æ—¶é—´éƒ¨åˆ†
å»æ‰æ—¥æœŸçš„æ—¶é—´éƒ¨åˆ†ï¼Œåªç•™ä¸‹å¹´ã€æœˆå’Œæ—¥ã€‚å¦‚æœæ‚¨ä¸å…³å¿ƒæ—¶é—´ï¼Œåˆ™é€‚åˆæ—¥æœŸæ¯”è¾ƒã€‚
```js
striptime(file.ctime) // ç›¸å½“äºéšå¼å­—æ®µçš„ file.cday 
striptime(file.mtime) // ç›¸å½“äºéšå¼å­—æ®µçš„ file.mday
```
**ä¸¾ä¾‹**ï¼š
- `file.ctime`å–å€¼çš„ç»“æœæ˜¯ `2023-02-09 23:44:38`ï¼Œ
- é€šè¿‡`striptime()`å‡½æ•°å¤„ç†ï¼Œ`striptime(file.ctime)`ç»“æœæ˜¯å»æ‰æ—¶é—´ï¼Œç»“æœä¸º`2023-02-09`
### 5.4 `dateformat(date|datetime, string)`æ ¼å¼åŒ– Dataview æ—¥æœŸ
ä½¿ç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸²æ ¼å¼åŒ– Dataview æ—¥æœŸã€‚ä½¿ç”¨ [Luxon tokens](https://moment.github.io/luxon/#/formatting?id=table-of-tokens) æ ¼å¼
```js
dateformat(file.ctime,"yyyy-MM-dd") = "2022-01-05"
dateformat(file.ctime,"HH:mm:ss") = "12:18:04"
dateformat(date(now),"x") = "1407287224054" 
dateformat(file.mtime,"ffff") = "Wednesday, August 6, 2014, 1:07 PM Eastern Daylight Time"
```
### 5.5 `localtime(date)`å˜æ›´ä¸ºæœ¬åœ°æ—¶é—´
å°†å›ºå®šæ—¶åŒºä¸­çš„æ—¥æœŸè½¬æ¢ä¸ºå½“å‰æ—¶åŒºä¸­çš„æ—¥æœŸã€‚
### 5.6 `meta(link)`è·å–åŒ…å«é“¾æ¥å…ƒæ•°æ®çš„å¯¹è±¡
è·å–åŒ…å«é“¾æ¥å…ƒæ•°æ®çš„å¯¹è±¡ã€‚å½“æ‚¨è®¿é—®é“¾æ¥ä¸Šçš„å±æ€§æ—¶ï¼Œæ‚¨å¾—åˆ°çš„æ˜¯é“¾æ¥æ–‡ä»¶ä¸­çš„å±æ€§å€¼ã€‚Â `meta`Â å‡½æ•°å¯ä»¥è®¿é—®é“¾æ¥æœ¬èº«çš„å±æ€§ã€‚

**`meta`Â è¿”å›çš„å¯¹è±¡æœ‰å‡ ä¸ªå±æ€§ï¼š**
#### 01 `meta(link).display`è·å–é“¾æ¥çš„æ˜¾ç¤ºæ–‡æœ¬
è·å–é“¾æ¥çš„æ˜¾ç¤ºæ–‡æœ¬ï¼Œå¦‚æœé“¾æ¥æ²¡æœ‰å®šä¹‰çš„æ˜¾ç¤ºæ–‡æœ¬ï¼Œåˆ™è¿”å› nullã€‚
```js
meta([[2021-11-01|Displayed link text]]).display = "Displayed link text"
meta([[2021-11-01]]).display = null
```
#### 02 `meta(link).embed`åˆ¤æ–­é“¾æ¥æ˜¯å¦åµŒå…¥
çœŸæˆ–å‡å–å†³äºé“¾æ¥æ˜¯å¦æ˜¯åµŒå…¥çš„ã€‚è¿™äº›æ˜¯ä»¥æ„Ÿå¹å·å¼€å¤´çš„é“¾æ¥ï¼Œä¾‹å¦‚Â `![[Some Link]]`Â ã€‚
#### 03 `meta(link).path`è·å–é“¾æ¥çš„è·¯å¾„
è·å–é“¾æ¥çš„è·¯å¾„éƒ¨åˆ†ã€‚
```js
meta([[My Project]]).path = "My Project" 
meta([[My Project#Next Actions]]).path = "My Project" 
meta([[My Project#^9bcbe8]]).path = "My Project"
```
#### 04 `meta(link).subpath`è·å–é“¾æ¥çš„å­è·¯å¾„
è·å–é“¾æ¥çš„å­è·¯å¾„ã€‚
- å¯¹äºæŒ‡å‘æ–‡ä»¶ä¸­æ ‡é¢˜çš„é“¾æ¥ï¼Œå­è·¯å¾„å°†æ˜¯æ ‡é¢˜çš„æ–‡æœ¬ã€‚
- å¯¹äºå—çš„é“¾æ¥ï¼Œå­è·¯å¾„å°†æ˜¯å— IDã€‚
- å¦‚æœè¿™äº›æƒ…å†µéƒ½ä¸é€‚ç”¨ï¼Œåˆ™å­è·¯å¾„å°†ä¸ºç©ºã€‚
```js
meta([[My Project#Next Actions]]).subpath = "Next Actions" 
meta([[My Project#^9bcbe8]]).subpath = "9bcbe8" 
meta([[My Project]]).subpath = null
```

è¿™å¯ç”¨äºé€‰æ‹©ç‰¹å®šæ ‡é¢˜ä¸‹çš„ä»»åŠ¡ã€‚
```js
dataview task where meta(section).subpath = "Next Actions" 
```
#### 05 `meta(link).type`åˆ¤æ–­é“¾æ¥çš„ç±»å‹æ˜¯æ–‡æœ¬ã€æ ‡é¢˜è¿˜æ˜¯å—
å…·æœ‰å€¼â€œfileâ€ã€â€œheaderâ€æˆ–â€œblockâ€ï¼Œå…·ä½“å–å†³äºé“¾æ¥æ˜¯é“¾æ¥åˆ°æ•´ä¸ªæ–‡ä»¶ã€æ–‡ä»¶ä¸­çš„æ ‡é¢˜è¿˜æ˜¯æ–‡ä»¶ä¸­çš„å—ã€‚
```js
meta([[My Project]]).type = "file" 
meta([[My Project#Next Actions]]).type = "header" 
meta([[My Project#^9bcbe8]]).type = "block"
```
## å›é¡¾
::: details ğŸ¥•1 æ„é€ å™¨-å¤§çº²(ç‚¹å‡»å±•å¼€)
```mermaid
  flowchart LR
      A("1 æ„é€ å™¨") --> 1["date(any)<br>1 æ—¥æœŸå‡½æ•°"]
      A --> 2("dur(any)<br>2 æŒç»­æ—¶é—´")
      A --> 3("number(string)<br>3 æå–æ•°å­—")
      A --> 4("string(any)<br>4 è½¬æ¢æˆå­—ç¬¦ä¸²")
      A --> 5("link(path, [display])<br>5 åˆ›å»ºé“¾æ¥")
      A --> 6("embed(link, [embed?])<br>6 åµŒå…¥é“¾æ¥")
      A --> 7("elink(url, [display])<br>7 åˆ›å»ºå¤–éƒ¨ url çš„é“¾æ¥")
      A --> 8("typeof(any)<br>8 æ˜¾ç¤ºå¯¹è±¡çš„ç±»å‹")
```
:::
::: details ğŸ¥•2 æ•°å€¼è¿ç®—-å¤§çº²(ç‚¹å‡»å±•å¼€)
```mermaid
  flowchart LR
      A("2 æ•°å€¼è¿ç®—") --> 1["round(number, [digits])<br>1 å°†æ•°å­—å››èˆäº”å…¥"]
      A --> 2("min(a, b, ..)<br>2 è®¡ç®—æœ€å°å€¼")
      A --> 3("max(a, b, ..)<br>3 è®¡ç®—æœ€å¤§å€¼")
      A --> 4("sum(array)<br>4 æ±‚å’Œ")
      A --> 5("product(array)<br>5 è®¡ç®—ä¹˜ç§¯")
      A --> 6("average(array)<br>6 æ±‚å¹³å‡å€¼")
      A --> 7("minby(array, function)<br>7 è®¡ç®—æ•°ç»„æœ€å°å€¼")
      A --> 8("maxby(array, function)<br>8 è®¡ç®—æ•°ç»„æœ€å¤§å€¼")
```
:::
::: details ğŸ¥•3 å¯¹è±¡ã€æ•°ç»„å’Œå­—ç¬¦ä¸²æ“ä½œ-å¤§çº²(ç‚¹å‡»å±•å¼€)
```mermaid
  flowchart LR
      A("3 å¯¹è±¡ã€æ•°ç»„å’Œå­—ç¬¦ä¸²æ“") --> 1["contains()<br>1 åˆ¤æ–­åŒ…å«å†…å®¹"]
      A --> 2("containsword(list|string, value)<br>2 å•è¯å®Œå…¨åŒ¹é…ï¼Œä¸åŒºåˆ†å¤§å°å†™")
      A --> 3("extract(object, key1, key2, ...)<br>3 æå–å¤šä¸ªå­—æ®µ")
      A --> 4("sort(list)<br>4 å¯¹åˆ—è¡¨æ’åº")
      A --> 5("reverse(list)<br>5 åè½¬åˆ—è¡¨")
      A --> 6("length(object|array)<br>6 è¿”å›å¯¹è±¡çš„å­—æ®µæ•°")
      A --> 7("nonnull(array)<br>7 åˆ é™¤ç©ºå€¼")
      A --> 8("all(array)<br>8 æ•°ç»„ä¸­æ‰€æœ‰å€¼ä¸ºçœŸ")
      A --> 9("any(array)<br>9 æ•°ç»„ä»»ä½•å€¼éƒ½ä¸ºçœŸ")
      A --> 10("none(array)<br>10 æ•°ç»„ä¸­æ²¡æœ‰çœŸ")
      A --> 11("join(array, [delimiter])<br>11 æ‹¼æ¥å‡½æ•°")
      A --> 12("filter(array, predicate)<br>12 è¿‡æ»¤æ•°ç»„ä¸­å…ƒç´ ")
      A --> 13("map(array, func)<br>13 æ˜ å°„ç»“æœçš„åˆ—è¡¨")
```
:::
::: details ğŸ¥•4 å­—ç¬¦ä¸²æ“ä½œæ“ä½œ-å¤§çº²(ç‚¹å‡»å±•å¼€)
```mermaid
  flowchart LR
      A("4 å­—ç¬¦ä¸²æ“ä½œæ“") --> 1["regextest(pattern, string)<br>1 æ£€æŸ¥æ˜¯å¦åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼"]
      A --> 2("regexmatch(pattern, string)<br>2 æ­£åˆ™è¡¨è¾¾å¼æ£€æµ‹æ˜¯å¦ä¸æ•´ä¸ªå­—ç¬¦ä¸²åŒ¹é…")
      A --> 3("regexreplace(string, pattern, replacement)<br>3 æ­£åˆ™åŒ¹é…åæ›¿æ¢")
      A --> 4("replace(string, pattern, replacement)<br>4 æ›¿æ¢å­—ç¬¦ä¸²")
      A --> 5("lower(string)<br>5 å°†å­—ç¬¦ä¸²è½¬ä¸ºå°å†™")
      A --> 6("upper(string)<br>6 å°†å­—ç¬¦ä¸²è½¬ä¸ºå¤§å†™")
      A --> 7("split(string, delimiter, [limit])<br>7 æ‹†åˆ†å­—ç¬¦ä¸²")
      A --> 8("startswith(string, prefix)<br>8 æ£€æŸ¥æ˜¯å¦ä»¥æŒ‡å®šå‰ç¼€å¼€å¤´")
      A --> 9("endswith(string, suffix)<br>9 æ£€æŸ¥æ˜¯å¦ä»¥æŒ‡å®šçš„åç¼€ç»“å°¾")
      A --> 10("padleft(string, length, [padding])<br>10 åœ¨å·¦ä¾§æ·»åŠ å¡«å……å­—ç¬¦ä¸²è®©é•¿åº¦è¾¾æ ‡")
      A --> 11("padright(string, length, [padding])<br>11 åœ¨å³ä¾§ä¾§æ·»åŠ å¡«å……å­—ç¬¦ä¸²è®©é•¿åº¦è¾¾æ ‡")
      A --> 12("substring(string, start, [end])<br>12 æŒ‡å®šèŒƒå›´å–å€¼")
      A --> 13("truncate(string, length, [suffix])`<br>13 æŒ‰é•¿åº¦æˆªæ–­å­—ç¬¦ä¸²")
```
:::
::: details ğŸ¥•5 å·¥å…·å‡½æ•°-å¤§çº²(ç‚¹å‡»å±•å¼€)
```mermaid
  flowchart LR
      A("5 å·¥å…·å‡½æ•°") --> 1["default(field, value) <br>1 é»˜è®¤å€¼"]
      A --> 2("choice(bool, left, right)<br>2 é€‰æ‹©å™¨ä»¿ifåˆ¤æ–­")
      A --> 3("striptime(date)<br>3 å»æ‰æ—¥æœŸçš„æ—¶é—´éƒ¨åˆ†")
      A --> 4("dateformat(date|datetime, string)<br>4 æ ¼å¼åŒ– Dataview æ—¥æœŸ")
      A --> 5("localtime(date)<br>5 å˜æ›´ä¸ºæœ¬åœ°æ—¶é—´")
      A --> 6("meta(link)<br>6 è·å–åŒ…å«é“¾æ¥å…ƒæ•°æ®çš„å¯¹è±¡")
      6 --> 6.1("meta(link).display`<br>1 è·å–é“¾æ¥çš„æ˜¾ç¤ºæ–‡æœ¬")
      6 --> 6.2("meta(link).embed<br>2 åˆ¤æ–­é“¾æ¥æ˜¯å¦åµŒå…¥")
      6 --> 6.3("meta(link).path<br>3 è·å–é“¾æ¥çš„è·¯å¾„")
      6 --> 6.4("meta(link).subpath<br>4 è·å–é“¾æ¥çš„å­è·¯å¾„")
      6 --> 6.5("meta(link).type<br>5 åˆ¤æ–­é“¾æ¥çš„ç±»å‹æ˜¯<br>æ–‡æœ¬ã€æ ‡é¢˜è¿˜æ˜¯å—")
```
:::

## å…¶ä»–æ¦‚å¿µ
### 1 è°“è¯
::: tip è°“è¯ï¼ˆpredicateï¼‰
- SQL è°“è¯å°±æ˜¯è¿”å›å€¼ä¸ºÂ `TRUE`ã€`FALSE`Â æˆ–Â `UNKNOWN`Â çš„**è¡¨è¾¾å¼**ã€‚
- =ã€<ã€>ã€<> ç­‰æ¯”è¾ƒè¿ç®—ç¬¦ï¼Œå…¶æ­£å¼çš„åç§°å°±æ˜¯æ¯”è¾ƒè°“è¯
- é€šä¿—æ¥è®²è°“è¯å°±æ˜¯ SQL å¸¸ç”¨çš„å‡½æ•° ä¸­ä»‹ç»çš„å‡½æ•°ä¸­çš„ä¸€ç§ï¼Œæ˜¯éœ€è¦æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„å‡½æ•°ï¼Œè¯¥æ¡ä»¶å°±æ˜¯è¿”å›å€¼æ˜¯çœŸå€¼ã€‚
- å¯¹é€šå¸¸çš„å‡½æ•°æ¥è¯´ï¼Œè¿”å›å€¼æœ‰å¯èƒ½æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²æˆ–è€…æ—¥æœŸç­‰ï¼Œä½†æ˜¯è°“è¯çš„è¿”å›å€¼å…¨éƒ½æ˜¯çœŸå€¼ï¼ˆTRUE/FALSE/UNKNOWNï¼‰ã€‚è¿™ä¹Ÿæ˜¯è°“è¯å’Œå‡½æ•°çš„æœ€å¤§åŒºåˆ«ã€‚
:::
### 2 ç®­å¤´å‡½æ•°=>
::: tip =>ç®­å¤´å‡½æ•°
(a, b) => a + b è¡¨ç¤ºä¸€ä¸ªå‡½æ•°æ¥å—ä¸¤ä¸ªåä¸º a å’Œ b çš„å‚æ•°ã€‚
åœ¨æ‰§è¡Œæ—¶ï¼Œå®ƒå°†å¯¹è¡¨è¾¾å¼ **a + b æ±‚å€¼**ï¼Œå¹¶è¿”å›è®¡ç®—ç»“æœ

è¯­æ³•ï¼š==(å‚æ•°) => è¡¨è¾¾å¼==  
- å³ä¾§æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼šå‡½æ•°è®¡ç®—è¡¨è¾¾å¼å¹¶è¿”å›å…¶ç»“æœ
- å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œåˆ™å¯ä»¥çœç•¥æ‹¬å·ï¼Œä¾‹å¦‚ `n => n*2`

æ³¨æ„ï¼š**è¿™ä¸æ˜¯æ¯”è¾ƒ**ï¼Œå·¦è¾¹æ˜¯å‚æ•°ï¼Œå³è¾¹æ˜¯è®¡ç®—æ–¹å¼ã€‚
:::
### 3 æ¯”è¾ƒè¿ç®—ç¬¦
## å¸¸ç”¨çš„å‡½æ•°
- **filter**ï¼š3.12 è¿‡æ»¤æ•°ç»„ä¸­å…ƒç´ 
- **regexmatch**ï¼š4.2 æ­£åˆ™è¡¨è¾¾å¼æ£€æµ‹æ˜¯å¦ä¸æ•´ä¸ªå­—ç¬¦ä¸²åŒ¹é…
- **length**ï¼š3.6 è¿”å›å¯¹è±¡çš„å­—æ®µæ•°
- **striptime**ï¼š5.3 å»æ‰æ—¥æœŸçš„æ—¶é—´éƒ¨åˆ†
- **choice**ï¼šif...else...
- **completed**ï¼šå®Œæˆçš„ã€‚éšå¼å­—æ®µ
- **dateformat**ï¼š5.4 æ ¼å¼åŒ– Dataview æ—¥æœŸ
## å‡½æ•°çš„ç»„åˆå’ŒåµŒå¥—

```js
length(filter(file.tasks, (t) => regexmatch(".*#tweet.*", t.text))) 
```
