{
  "enabled": true,
  "name": "Test Coverage Automation",
  "description": "Monitors source file modifications to identify new or changed functions/methods, checks for corresponding test coverage, generates missing test cases, runs tests, and updates coverage reports",
  "version": "1",
  "when": {
    "type": "fileEdited",
    "patterns": [
      "**/*.js",
      "**/*.ts",
      "**/*.jsx",
      "**/*.tsx",
      "**/*.vue"
    ]
  },
  "then": {
    "type": "askAgent",
    "prompt": "A source file has been modified. Please perform the following tasks:\n\n1. **Analyze the changes**: Identify all new or modified functions and methods in the changed file(s)\n2. **Check test coverage**: Determine if corresponding test files exist and if they cover the modified code\n3. **Generate missing tests**: If coverage is insufficient, generate comprehensive test cases for:\n   - New functions/methods\n   - Modified functions/methods with changed behavior\n   - Edge cases and error handling\n4. **Run tests**: Execute the test suite to verify all tests pass\n5. **Update coverage report**: Generate or update the test coverage report and highlight any gaps\n\nPlease provide:\n- A summary of identified changes (new/modified functions)\n- Test coverage status (existing vs. missing)\n- Generated test cases (if any)\n- Test execution results\n- Updated coverage metrics\n\nUse the project's testing framework and follow existing test patterns."
  }
}